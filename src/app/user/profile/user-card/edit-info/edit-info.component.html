<form [formGroup]="form" (ngSubmit)="save()">
  <h1>{{ user.username }}</h1>
  <mat-dialog-content>
    <mat-form-field>
      <mat-label>E-mail</mat-label>
      <input matInput formControlName="email" />
      <mat-error *error="'email'">
        Invalid e-mail
      </mat-error>
      <mat-error *error="'required'">
        E-mail is required
      </mat-error>
      <mat-error *error="'uniqueEmail'">
        E-mail already exists
      </mat-error>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Password</mat-label>
      <input
        matInput
        [type]="hide ? 'password' : 'text'"
        placeholder="Password"
        formControlName="password"
        autocomplete="new-password"
      />
      <button
        mat-icon-button
        matSuffix
        (mousedown)="hide = false"
        (mouseup)="hide = true"
        type="button"
        tabindex="-1"
      >
        <mat-icon>
          {{ hide ? 'visibility_off' : 'visibility' }}
        </mat-icon>
      </button>
      <mat-error *error="'required'">
        Password is required
      </mat-error>
      <mat-error *error="'unequalPasswords'">
        Passwords doesn't match
      </mat-error>
      <mat-error *error="{ minlength: true, unequalPasswords: false }">
        Password must be at least 4 characters long
      </mat-error>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Confirm password</mat-label>
      <input
        matInput
        [type]="hideConfirm ? 'password' : 'text'"
        placeholder="Confirm password"
        formControlName="confirmPassword"
        autocomplete="new-password"
      />
      <button
        mat-icon-button
        matSuffix
        (mousedown)="hideConfirm = false"
        (mouseup)="hideConfirm = true"
        type="button"
        tabindex="-1"
      >
        <mat-icon>
          {{ hideConfirm ? 'visibility_off' : 'visibility' }}
        </mat-icon>
      </button>
      <mat-error *error="'required'">
        Confirm password is required
      </mat-error>
      <mat-error *error="'unequalPasswords'">
        Passwords doesn't match
      </mat-error>
      <mat-error *error="{ minlength: true, unequalPasswords: false }">
        Password must be at least 4 characters long
      </mat-error>
    </mat-form-field>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button color="accent" mat-dialog-close type="button">
      Cancel
    </button>
    <button
      mat-button
      color="accent"
      type="submit"
      [disabled]="form.invalid || saving || form.pending || form.pristine"
    >
      Save
    </button>
  </mat-dialog-actions>
</form>
