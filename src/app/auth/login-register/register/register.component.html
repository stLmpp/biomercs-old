<form [formGroup]="form" (ngSubmit)="register()">
  <mat-card>
    <ng-container>
      <h1 mat-card-title>Register</h1>
      <mat-card-content>
        <mat-form-field>
          <mat-label>Username</mat-label>
          <input
            matInput
            placeholder="Username"
            formControlName="username"
            autocomplete="username"
          />
          <mat-error *ngIf="usernameControl.hasError('required')">
            Username is required
          </mat-error>
          <mat-error *ngIf="usernameControl.hasError('uniqueUsername')">
            Username already exists
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-label>E-mail</mat-label>
          <input
            matInput
            placeholder="E-mail"
            formControlName="email"
            autocomplete="email"
          />
          <mat-error *ngIf="emailControl.hasError('required')">
            E-mail is required
          </mat-error>
          <mat-error *ngIf="emailControl.hasError('email')">
            Invalid e-mail
          </mat-error>
          <mat-error *ngIf="emailControl.hasError('uniqueEmail')">
            E-mail already exists
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Password</mat-label>
          <input
            matInput
            type="password"
            placeholder="Password"
            formControlName="password"
            autocomplete="current-password"
          />
          <mat-error *ngIf="passwordControl.hasError('required')">
            Password is required
          </mat-error>
          <mat-error *ngIf="passwordControl.hasError('unequalPasswords')">
            Passwords doesn't match
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Confirm password</mat-label>
          <input
            matInput
            type="password"
            placeholder="Confirm password"
            formControlName="confirmPassword"
            autocomplete="current-password"
          />
          <mat-error *ngIf="confirmPasswordControl.hasError('required')">
            Confirm password is required
          </mat-error>
          <mat-error
            *ngIf="confirmPasswordControl.hasError('unequalPasswords')"
          >
            Passwords doesn't match
          </mat-error>
        </mat-form-field>
      </mat-card-content>
      <mat-card-actions align="end">
        <button
          mat-button
          type="submit"
          [disabled]="form.invalid || form.disabled || form.pending"
        >
          Register
        </button>
        <button mat-button [disabled]="form.disabled">Cancel</button>
      </mat-card-actions>
    </ng-container>
  </mat-card>
</form>
<ng-template #successRef let-data>
  <h1 mat-dialog-title>
    Success
  </h1>
  <mat-dialog-content>
    An e-mail was sent to {{ data }} for account confirmation.
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button mat-dialog-close color="accent">
      Close
    </button>
  </mat-dialog-actions>
</ng-template>
